# 用户画像

用户画像是通过给客户打标签的形式，增加对用户的了解，方便对用户进行精准营销。


# 业务说明

* 标签类别：
标签类别是标签的最顶层划分，按照标签用途分为：用户基础信息，交易行为，服务数据，风险数据等。

* 标签类型
标签类型是指标签根据具体的一项信息将标签归类，每个标签类型代表一类信息，同一个标签类型下的标签描述用户的同一个特性。如性别，年龄等。标签类型可以设置排他关系，如标签类型为性别，则需要设置同一个客户只能被打上一个性别标签。

* 标签
标签是系统为客户标记的客户特有属性，一个客户可以持有多个标签。

* 画像标签
画像标签是通过已有标签进行分析计算后产生的标签，如可以根据一定规则将一组标签组合成贡献度标签。

# 操作步骤

* 查询标签大类
* 查询标签类型
* 新建标签类型
* 查询标签
* 新建标签
* 为客户添加标签
* 查询客户标签
* 根据标签查询客户信息
* 新建画像标签
* 设置画像标签规则
* 生成画像标签
* 自动添加标签

# 实现设计

## 表设计

## 接口设计

## 批量设计

### 画像标签生成
* 查询生成的画像标签。

  1. 根据标签查询接口，查询所有画像标签。
  2. 判断画像标签的下一生成日期字段，如下一生成日期等于当前记账日期，则需要在当前记账日期生成此画像标签。

* 根据标签规则查询符合画像标签的用户。
  1. 查询画像标签计算结果表里，当前日期不存在的客户ID。
  2. 计算客户的画像标签值，记录到画像标签计算结果表。
  3. 查询计算结果大于画像标签阈值的客户ID，如客户已有此标签，更新标签信息，如客户无此标签新增客户标签，此步骤采用批量处理的方式。

* 给符合要求的客户打标签。

* 根据标签周期更新下次生成画像标签的日期。

# 测试说明